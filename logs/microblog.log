2020-09-10 15:49:18,212 ERROR: Unhandled exception [in ./app/tasks.py:72]
Traceback (most recent call last):
  File "./app/tasks.py", line 66, in rebuild_hansard
    rebuild(date)
  File "./app/rebuild.py", line 17, in rebuild
    fake_file = BytesIO(request.text.encode('utf-8'))
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/requests/models.py", line 858, in text
    encoding = self.apparent_encoding
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/requests/models.py", line 728, in apparent_encoding
    return chardet.detect(self.content)['encoding']
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/chardet/__init__.py", line 38, in detect
    detector.feed(byte_str)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/chardet/universaldetector.py", line 211, in feed
    if prober.feed(byte_str) == ProbingState.FOUND_IT:
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/chardet/charsetgroupprober.py", line 71, in feed
    state = prober.feed(byte_str)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/chardet/sbcharsetprober.py", line 79, in feed
    byte_str = self.filter_international_words(byte_str)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/chardet/charsetprober.py", line 87, in filter_international_words
    buf)
  File "/Users/michellewong/opt/anaconda3/lib/python3.7/re.py", line 223, in findall
    return _compile(pattern, flags).findall(string)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/rq/timeouts.py", line 64, in handle_death_penalty
    '({0} seconds)'.format(self._timeout))
rq.timeouts.JobTimeoutException: Task exceeded maximum timeout value (180 seconds)
2020-09-10 15:50:54,193 INFO: Microblog startup [in ./app/__init__.py:88]
2020-09-10 15:52:14,408 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:52:18,603 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:52:22,960 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:52:25,560 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:55:15,823 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:55:19,793 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:55:22,798 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:55:26,361 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:56:06,658 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 15:56:28,500 INFO: Microblog startup [in ./app/__init__.py:88]
2020-09-10 16:05:40,916 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:08:54,121 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:09:04,029 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:09:13,841 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:11:09,033 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:11:12,909 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:11:35,470 INFO: Microblog startup [in ./app/__init__.py:88]
2020-09-10 16:51:49,715 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:52:08,939 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:52:17,705 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:52:22,204 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:52:32,449 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 16:52:56,354 INFO: Microblog startup [in ./app/__init__.py:88]
2020-09-10 17:22:28,233 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 17:23:45,883 ERROR: Exception on /translate [POST] [in /Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py:1892]
Traceback (most recent call last):
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask_login/utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "/Users/michellewong/Documents/Speakup/app/main/routes.py", line 181, in translate_text
    request.form['dest_language'])})
  File "/Users/michellewong/Documents/Speakup/app/translate.py", line 24, in translate
    'Ocp-Apim-Subscription-Key': app.config['MS_TRANSLATOR_KEY'],
NameError: name 'app' is not defined
2020-09-10 17:30:37,995 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
2020-09-10 17:30:49,253 ERROR: Exception on /translate [POST] [in /Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py:1892]
Traceback (most recent call last):
  File "/Users/michellewong/Documents/Speakup/app/translate.py", line 36, in translate
    response.raise_for_status() # Raise exception if call failed
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/requests/models.py", line 941, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=en

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1952, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1821, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/_compat.py", line 39, in reraise
    raise value
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/michellewong/Documents/Speakup/venv/lib/python3.7/site-packages/flask_login/utils.py", line 272, in decorated_view
    return func(*args, **kwargs)
  File "/Users/michellewong/Documents/Speakup/app/main/routes.py", line 181, in translate_text
    request.form['dest_language'])})
  File "/Users/michellewong/Documents/Speakup/app/translate.py", line 48, in translate
    return ["Error calling the Translator Text API: " + e.strerror]
TypeError: can only concatenate str (not "NoneType") to str
2020-09-10 17:31:41,561 INFO: Microblog startup [in /Users/michellewong/Documents/Speakup/app/__init__.py:88]
